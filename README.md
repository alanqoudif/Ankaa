# Sultanate Legal AI Assistant

مساعد ذكاء اصطناعي قانوني متكامل لسلطنة عمان يتيح البحث الذكي والتحليل القانوني وإنشاء التقارير استناداً إلى القوانين العمانية.

## جدول المحتويات

- [نظرة عامة](#نظرة-عامة)
- [المستوى الأول - بوت البحث الذكي](#المستوى-الأول---بوت-البحث-الذكي)
- [المستوى الثاني - استخراج المواد القانونية](#المستوى-الثاني---استخراج-المواد-القانونية)
- [المستوى الثالث - مقارنة القوانين والتفاعل الصوتي](#المستوى-الثالث---مقارنة-القوانين-والتفاعل-الصوتي)
- [المستوى الرابع - إنشاء المستندات القانونية](#المستوى-الرابع---إنشاء-المستندات-القانونية)
- [المستوى الخامس - التقارير الذكية ودراسة الحالات](#المستوى-الخامس---التقارير-الذكية-ودراسة-الحالات)
- [متطلبات النظام](#متطلبات-النظام)
- [التثبيت والإعداد](#التثبيت-والإعداد)
- [هيكل المشروع](#هيكل-المشروع)
- [استخدام النظام](#استخدام-النظام)
- [أمثلة على الاستخدام](#أمثلة-على-الاستخدام)

## نظرة عامة

تم تطوير هذا المشروع على خمس مراحل متتالية، كل مرحلة تضيف مجموعة من الميزات والوظائف المتقدمة. يعتمد النظام على تقنيات الذكاء الاصطناعي والتعلم الآلي لمعالجة وتحليل القوانين العمانية وتقديم إجابات دقيقة للمستخدمين.

## المستوى الأول - بوت البحث الذكي

### الوصف
في هذا المستوى، تم تطوير شات بوت ذكي قادر على البحث والإجابة على أسئلة المستخدمين استناداً فقط إلى الوثائق القانونية العمانية (باللغتين العربية والإنجليزية).

### الميزات المنفذة
- تحليل ومعالجة مستندات PDF القانونية
- إنشاء تضمينات متجهية (Vector Embeddings) للبحث الفعال
- واجهة محادثة حديثة باستخدام Streamlit
- استخدام نماذج لغوية محلية لمعالجة الأسئلة والإجابات
- دعم اللغتين العربية والإنجليزية

### التقنيات المستخدمة
- Python 3.10+
- LangChain لإدارة المستندات
- ChromaDB لتخزين التضمينات المتجهية
- PyMuPDF لتحليل ملفات PDF
- Streamlit لواجهة المستخدم
- نماذج LLM محلية للاستدلال

## المستوى الثاني - استخراج المواد القانونية

### الوصف
في هذا المستوى، تم تحسين النظام ليكون قادراً على استخراج مواد قانونية محددة من القوانين العمانية وتقديم ملخصات لها.

### الميزات المنفذة
- استخراج مواد قانونية محددة بناءً على رقم المادة
- تلخيص المواد القانونية
- تحسين دقة البحث والاسترجاع
- تحسين واجهة المستخدم لعرض المواد القانونية

### التقنيات المستخدمة
- تقنيات معالجة اللغة الطبيعية المتقدمة
- خوارزميات استخراج النصوص
- تقنيات التلخيص الآلي

## المستوى الثالث - مقارنة القوانين والتفاعل الصوتي

### الوصف
في هذا المستوى، تم إضافة وظائف مقارنة القوانين والتفاعل الصوتي مع النظام.

### الميزات المنفذة
- مقارنة القوانين من مستندات قانونية مختلفة
- التفاعل الصوتي عبر الميكروفون (تحويل الصوت إلى نص)
- قراءة الإجابات بصوت عالٍ (تحويل النص إلى صوت)

### التقنيات المستخدمة
- Vosk (للتعرف على الصوت بدون إنترنت) أو Whisper API (عبر الإنترنت)
- pyttsx3 (للقراءة بدون إنترنت) أو gTTS (عبر الإنترنت)
- LangChain و LLM لمقارنة المستندات القانونية

## المستوى الرابع - إنشاء المستندات القانونية

### الوصف
في هذا المستوى، تم تطوير وظائف إنشاء المستندات القانونية بناءً على متطلبات المستخدم.

### الميزات المنفذة
- إنشاء عقود قانونية (عقود عمل، عقود إيجار، عقود خدمات)
- إنشاء تفويضات قانونية
- تصدير المستندات بصيغة PDF
- إنشاء صور للمستندات
- حزم المستندات في ملفات ZIP

### التقنيات المستخدمة
- WeasyPrint أو ReportLab لإنشاء ملفات PDF
- PIL لإنشاء صور المستندات
- نماذج قوالب HTML لتصميم المستندات

## المستوى الخامس - التقارير الذكية ودراسة الحالات

### الوصف
في هذا المستوى النهائي، تم تطوير وظائف متقدمة لتحليل السيناريوهات القانونية المعقدة وإنشاء تقارير PDF شاملة.

### الميزات المنفذة
- استقبال سيناريوهات قانونية واقعية من المستخدم
- تحليل السيناريوهات بشكل قانوني استناداً إلى القوانين العمانية
- تحديد القوانين والمواد ذات الصلة
- تحليل الآثار القانونية المترتبة
- إنشاء تقارير PDF شاملة تتضمن التحليل والنتائج

### التقنيات المستخدمة
- LangChain و LlamaIndex لإدارة المستندات
- FAISS أو ChromaDB للبحث الدلالي
- WeasyPrint أو ReportLab لإنشاء تقارير PDF
- تقنيات تحليل النصوص المتقدمة

## متطلبات النظام

- Python 3.10 أو أحدث
- ذاكرة RAM: 8GB على الأقل (16GB موصى به)
- مساحة تخزين: 10GB على الأقل
- نظام تشغيل: Windows 10/11، macOS 12+، أو Linux
- وحدة معالجة رسومات (اختياري): لتسريع استخدام النماذج اللغوية

## التثبيت والإعداد

### 1. استنساخ المستودع:
```bash
git clone git@github.com:alanqoudif/Ankaa.git
cd Ankaa
```

### 2. إنشاء بيئة افتراضية (موصى به):
```bash
python -m venv .venv
source .venv/bin/activate  # لأنظمة Linux/macOS
# أو
.venv\Scripts\activate  # لنظام Windows
```

### 3. تثبيت المتطلبات:
```bash
pip install -r requirements.txt
```

### 4. تحميل النماذج اللغوية:
- قم بتحميل نموذج LLM المناسب ووضعه في مجلد `models/`
- أو استخدم Ollama (يجب تثبيته مسبقاً) لتشغيل النماذج

### 5. تشغيل التطبيق:
```bash
streamlit run src/app.py
```

## هيكل المشروع

```
.
├── README.md
├── requirements.txt
├── src
│   ├── app.py                     # نقطة الدخول الرئيسية للتطبيق
│   ├── data/                      # مجلد للوثائق القانونية
│   ├── document_loader.py         # وظائف تحميل وتحليل المستندات
│   ├── document_structure.py      # تعريف هيكل المستندات
│   ├── embeddings.py              # إنشاء التضمينات المتجهية
│   ├── llm_chain.py               # سلسلة LLM للأسئلة والأجوبة
│   ├── models/                    # مجلد لنماذج اللغة والتضمين
│   ├── retriever.py               # استرجاع المستندات ذات الصلة
│   ├── setup.py                   # إعداد المشروع
│   ├── ui/                        # مكونات واجهة المستخدم
│   │   ├── components.py          # مكونات واجهة المستخدم الأساسية
│   │   ├── document_components.py # مكونات إنشاء المستندات
│   │   └── voice_components.py    # مكونات التفاعل الصوتي
│   └── utils/                     # وظائف مساعدة
│       ├── arabic_utils.py        # معالجة اللغة العربية
│       ├── case_analysis_utils.py # تحليل القضايا القانونية
│       ├── comparison_utils.py    # مقارنة القوانين
│       ├── document_generation_utils.py # إنشاء المستندات
│       ├── document_utils.py      # معالجة المستندات
│       ├── image_generation_utils.py # إنشاء صور المستندات
│       ├── model_utils.py         # إدارة النماذج
│       ├── ollama_utils.py        # التكامل مع Ollama
│       └── voice_utils.py         # معالجة الصوت
└── chroma_db/                     # قاعدة بيانات ChromaDB
```

## استخدام النظام

1. قم بوضع الوثائق القانونية العمانية (بصيغة PDF) في مجلد `src/data/`
2. قم بتشغيل التطبيق باستخدام الأمر `streamlit run src/app.py`
3. في واجهة التطبيق:
   - انقر على "تحميل المستندات" لتحميل الوثائق القانونية
   - انقر على "إنشاء التضمينات" لإنشاء تضمينات متجهية للبحث
   - انقر على "تهيئة النظام" لتهيئة النظام للاستخدام
   - أو ببساطة انقر على "إعداد الكل" للقيام بجميع الخطوات السابقة دفعة واحدة
4. استخدم واجهة المحادثة لطرح الأسئلة أو طلب الخدمات المختلفة

## أمثلة على الاستخدام

### أسئلة عامة حول القوانين العمانية
- "ما هي عقوبة السرقة وفقًا للقوانين العمانية؟"
- "What is the punishment for theft according to Omani laws?"

### استخراج مواد قانونية محددة
- "أعطني المادة 150 من قانون الجزاء العماني"
- "Show me Article 25 of the Omani Labor Law"

### مقارنة القوانين
- "قارن بين قانون العمل وقانون الخدمة المدنية فيما يتعلق بالإجازات"
- "Compare the regulations for commercial companies between Oman and UAE"

### التفاعل الصوتي
- انقر على زر "إدخال صوتي" واطرح سؤالك شفهياً
- انقر على زر "قراءة بصوت عالٍ" لسماع الإجابة

### إنشاء المستندات القانونية
- استخدم قسم "إنشاء المستندات" لإنشاء عقود وتفويضات قانونية

### تحليل السيناريوهات القانونية
- "مواطن استثمر أموالاً في الخارج بدون أن يصرح بها للسلطات العمانية، ما هي الآثار القانونية؟"
- "شركة قامت بتسريح موظف دون إشعار مسبق، ما هي حقوق الموظف وفقاً للقانون العماني؟"
